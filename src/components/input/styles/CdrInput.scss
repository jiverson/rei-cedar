@import '../../../css/settings/index.scss';
@import './vars/CdrInput.vars.scss';

/* ==========================================================================
  # INPUT LABEL
  ========================================================================== */

.cdr-input__label {
  @include cdr-input-base-label-mixin;

  &--disabled {
    color:  $cdr-color-text-input-disabled;
  }
}

:global(.cdr-input__button) {
  fill: inherit;
  & ~ & {
    position: relative;
    margin-left: -4px; // TODO: why is ther ea space there?
    &::before {
      content: '';
      background-color: $cdr-color-border-input-default;
      position: absolute;
      left: -1px;
      width: 1px;
      height: 55%;
      top: 50%;
      transform: translateY(-50%);
    }
  }

  &:hover,
  &:active,
  &:focus,
  &:focus-within {
    background-color: $cdr-color-background-input-default-selected;
    box-shadow: inset 0 0 0 3px $cdr-color-border-input-default-active;
    outline: none;
    fill: $cdr-color-text-primary;
    svg {
      box-shadow: none;
      fill: $cdr-color-text-primary !important;
    }

    &::before {
      width: 0px;
    }
  }

  &:last-child {
    border-top-right-radius: $cdr-radius-softer;
    border-bottom-right-radius: $cdr-radius-softer;
  }
}

/* ==========================================================================
  # INPUT
  ========================================================================== */

.cdr-input {
  @include cdr-input-base-mixin;

  /* Style variants
    ========================================================================== */

  &--multiline {
    height: auto;
  }

  &--preicon {
    /* $input-pre-icon-default-width = 25px with the expectation that
        slot provided icon is close to that width */
    // TODO: use icon token here?
    padding-left: calc(#{$cdr-space-half-x} + #{$cdr-space-quarter-x} + 25px);
  }

// TODO: merge with variables (clean up variables?)  //
  &--primary {
    background-color: $cdr-color-background-input-default;
    &:active,
    &:focus {
      background-color: $cdr-color-background-input-default;
    }
  }
  &--secondary {
    background-color: $cdr-color-background-input-secondary;
    &:active,
    &:focus {
      background-color: $cdr-color-background-input-secondary-selected;
    }
  }

  &--error {
    background-color: $cdr-color-background-input-error;
    box-shadow: inset 0 0 0 1px $cdr-color-border-input-error;
  }

  &__error-message {
    margin-top: $cdr-space-quarter-x;
    // TODO: use token once fixed
    color: #B33322;//$cdr-color-text-input-error;
    fill: #B33322;//$cdr-color-text-input-error;
  }


  /* Size variants
    ========================================================================== */

  &--large {
    @include cdr-input-large-mixin;
  }

  /* @xs
    0px - 767px
    ========== */
  @include cdr-xs-mq-only {
    &--large\@xs {
      @include cdr-input-large-mixin;
    }
  }

  /* @sm
    768px - 991px
    ========== */
  @include cdr-sm-mq-only {
    &--large\@sm {
      @include cdr-input-large-mixin;
    }
  }

  /* @md
    992px - 1199px
    ========== */
  @include cdr-md-mq-only {
    &--large\@md {
      @include cdr-input-large-mixin;
    }
  }

  /* @lg
    1200px and up
    ========== */

  @include cdr-lg-mq-only {
    &--large\@lg {
      @include cdr-input-large-mixin;
    }
  }

  /* Slot Sections
    ========================================================================== */

  &__pre-icon {
    position: absolute;
    top: 50%;
    left: $cdr-space-half-x;
    transform: translateY(-50%);
  }

  &__post-icon {
  //   // CENTER ALIGN ME
  //   // position: absolute;
  //   // top: 50%;
  //   // right: 0;//$cdr-space-half-x;
  //   // transform: translateY(-50%);
  // necessary????
    display: block;
  }

  &__required-label {
    @include cdr-input-required-label-mixin;
  }

  &__optional-label {
    @include cdr-input-optional-label-mixin;
  }

  &__info-container {
    @include cdr-input-info-container-mixin;
  }

  &__helper-text {
    @include cdr-input-helper-text-mixin;
  }

  &__helper-text-top {
    margin-bottom: $cdr-space-quarter-x;
  }

  &__helper-text-bottom {
    margin-top: $cdr-space-quarter-x;
  }
}

/* ==========================================================================
   # INPUT WRAPPER
   ========================================================================== */

.cdr-input-label-wrap {
  position: relative;
}

// real cedar input wrapper
.cdr-input-inner-wrap {
  position: relative;
  flex-grow: 1
}

.cdr-input-wrap {
  position: relative;
  border: 1px solid $cdr-color-border-input-default;
  border-radius: $cdr-radius-softer;
  fill: $cdr-color-icon-default;
  display: flex;
}

.cdr-input--focused .cdr-input-wrap {
  border: 1px solid $cdr-color-border-input-default-active;
  // TODO: rename hover to active?
  background-color: $cdr-color-background-input-default-hover;
  box-shadow: inset 0 0 0 3px $cdr-color-border-input-default-active;
  svg {
    // TODO: token?
    fill: $cdr-color-text-primary;
  }
}
